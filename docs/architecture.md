# 技術選定

## 1. 技術スタック概要

- **フロントエンド**: React Native
- **バックエンド**: NestJS (TypeScript)
- **インフラ**: Firebase + GCP
- **主要API**: YouTube Data API, Speech-to-Text API, Gemini API

## 2. フロントエンド技術選定

### 2.1 React Native選定理由

| 評価項目           | React Native | Flutter | ネイティブ開発 |
| ------------------ | ------------ | ------- | -------------- |
| **開発効率**       | ◎            | ◎       | △              |
| **コード共有率**   | 90%          | 95%     | 0%             |
| **学習コスト**     | ○            | △       | ×              |
| **パフォーマンス** | ○            | ◎       | ◎              |
| **エコシステム**   | ◎            | ○       | ◎              |
| **採用実績**       | ◎            | ○       | ◎              |

### 2.2 技術スタック詳細

| 技術               | バージョン | 用途                       |
| ------------------ | ---------- | -------------------------- |
| React Native       | 0.74+      | クロスプラットフォーム開発 |
| TypeScript         | 5.0+       | 型安全性                   |
| Expo               | SDK 51+    | 開発・ビルド・デプロイ     |
| Redux Toolkit      | 2.0+       | 状態管理                   |
| React Navigation   | 6.0+       | ナビゲーション             |
| React Native Paper | 5.0+       | UI コンポーネント          |
| React Hook Form    | 7.0+       | フォーム管理               |
| React Query        | 5.0+       | サーバー状態管理           |

### 2.3 開発・ビルドツール

| 技術              | 用途           |
| ----------------- | -------------- |
| Expo CLI          | 開発環境       |
| EAS Build         | クラウドビルド |
| EAS Submit        | ストア配信     |
| Flipper           | デバッグ       |
| Metro             | バンドラー     |
| ESLint + Prettier | コード品質     |

### 2.4 ネイティブ機能

| 機能           | ライブラリ                | 用途                     |
| -------------- | ------------------------- | ------------------------ |
| カメラ         | expo-camera               | QRコード読み取り（将来） |
| 通知           | expo-notifications        | プッシュ通知             |
| 認証           | expo-local-authentication | 生体認証                 |
| ファイル       | expo-file-system          | ローカルファイル操作     |
| 共有           | expo-sharing              | レシピ共有               |
| クリップボード | expo-clipboard            | URL貼り付け              |

## 3. バックエンド技術選定

### 3.1 NestJS選定理由

| 評価項目             | NestJS | Express.js | Fastify |
| -------------------- | ------ | ---------- | ------- |
| **TypeScript対応**   | ◎      | ○          | ○       |
| **アーキテクチャ**   | ◎      | △          | ○       |
| **スケーラビリティ** | ◎      | ○          | ○       |
| **エコシステム**     | ◎      | ◎          | ○       |
| **学習コスト**       | ○      | ◎          | ○       |
| **Firebase連携**     | ◎      | ○          | ○       |

### 3.2 技術スタック詳細

| 技術               | バージョン | 用途                  |
| ------------------ | ---------- | --------------------- |
| NestJS             | 10.0+      | Node.jsフレームワーク |
| TypeScript         | 5.0+       | プログラミング言語    |
| Firebase Functions | v4         | サーバーレス実行環境  |
| Firebase Admin SDK | 12.0+      | Firebase操作          |
| axios              | 1.6+       | HTTP クライアント     |
| joi                | 17.12+     | バリデーション        |

## 4. インフラ・データベース選定

### 4.1 Firebase選定理由

| 評価項目           | Firebase | AWS | GCP |
| ------------------ | -------- | --- | --- |
| **開発速度**       | ◎        | ○   | ○   |
| **認証システム**   | ◎        | ○   | ○   |
| **リアルタイムDB** | ◎        | ○   | △   |
| **料金（小規模）** | ◎        | ○   | ○   |
| **モバイル対応**   | ◎        | ○   | ○   |
| **学習コスト**     | ◎        | △   | ○   |

### 4.2 技術スタック詳細

| 技術                     | 用途               |
| ------------------------ | ------------------ |
| Firebase Firestore       | NoSQLデータベース  |
| Firebase Storage         | ファイルストレージ |
| Firebase Authentication  | ユーザー認証       |
| Firebase Cloud Messaging | プッシュ通知       |
| AsyncStorage             | ローカルストレージ |

## 5. 外部API選定

### 5.1 API選定理由

| API                    | 選定理由                 | 代替案         |
| ---------------------- | ------------------------ | -------------- |
| **YouTube Data API**   | 公式API、安定性、無料枠  | -              |
| **GCP Speech-to-Text** | 日本語精度、Firebase連携 | AWS Transcribe |
| **Google Gemini API**  | 最新LLM、コスト効率      | OpenAI GPT-4   |

### 5.2 API詳細

| API                 | 用途               | 料金                  |
| ------------------- | ------------------ | --------------------- |
| YouTube Data API v3 | 動画メタデータ取得 | 10,000 units/日 無料  |
| GCP Speech-to-Text  | 音声認識           | 60分/月 無料          |
| Google Gemini API   | AI解析・レシピ抽出 | 150万トークン/月 無料 |

## 6. 開発・運用ツール選定

### 6.1 CI/CD

| 技術           | 用途                 |
| -------------- | -------------------- |
| EAS Build      | モバイルアプリビルド |
| GitHub Actions | 自動テスト・デプロイ |
| EAS Submit     | ストア配信自動化     |

### 6.2 監視・分析

| 技術                 | 用途               |
| -------------------- | ------------------ |
| Firebase Analytics   | ユーザー行動分析   |
| Firebase Crashlytics | クラッシュレポート |
| Firebase Performance | パフォーマンス監視 |

### 6.3 開発支援

| 技術       | 用途               |
| ---------- | ------------------ |
| Flipper    | デバッグ           |
| Reactotron | Redux状態監視      |
| Storybook  | コンポーネント開発 |

## 7. セキュリティ考慮

### 7.1 認証・認可

| 技術                      | 用途               |
| ------------------------- | ------------------ |
| Firebase Authentication   | ユーザー認証       |
| expo-local-authentication | 生体認証           |
| Firebase Security Rules   | データアクセス制御 |

#### 7.1.1 サポート認証方式

| 認証方式               | 実装ライブラリ            | 用途               |
| ---------------------- | ------------------------- | ------------------ |
| **メール・パスワード** | Firebase Auth             | 基本認証           |
| **Googleアカウント**   | expo-auth-session/google  | ソーシャルログイン |
| **生体認証**           | expo-local-authentication | ローカル認証       |

#### 7.1.2 認証方式選定理由

**Googleアカウントのみ選定理由**:

- **統一エコシステム**: GCP、YouTube APIとの親和性
- **開発効率**: 一つのプロバイダーに集中した実装
- **ユーザビリティ**: YouTubeとの連携がスムーズ
- **セキュリティ**: Googleの高度なセキュリティ機能活用
- **運用コスト**: 複数プロバイダー対応の複雑性回避

### 7.2 データ保護

| 技術               | 用途                       |
| ------------------ | -------------------------- |
| HTTPS              | 通信暗号化                 |
| AsyncStorage暗号化 | ローカルデータ保護         |
| API Key管理        | 環境変数による秘匿情報管理 |

## 8. 技術選定の判断基準

### 8.1 評価軸

1. **開発効率**: 短期間でのMVPリリース
2. **コスト**: 初期・運用コストの最小化
3. **スケーラビリティ**: ユーザー増加への対応
4. **保守性**: 長期的な機能追加・修正の容易さ
5. **学習コスト**: チーム習得の容易さ

### 8.2 技術選定のトレードオフ

| 選択             | メリット                   | デメリット         | 対策                     |
| ---------------- | -------------------------- | ------------------ | ------------------------ |
| **React Native** | 開発効率、エコシステム     | パフォーマンス     | 最適化、プロファイリング |
| **Firebase**     | 開発速度、統合性           | ベンダーロックイン | マルチクラウド検討       |
| **NestJS**       | アーキテクチャ、TypeScript | 学習コスト         | 段階的導入               |

## 9. 将来的な技術検討

### 9.1 スケーリング対応

- **マイクロサービス化**: ユーザー増加時の分散アーキテクチャ
- **CDN導入**: 画像・動画配信の高速化
- **キャッシュレイヤー**: Redis等の導入

### 9.2 新技術導入検討

- **AI/ML強化**: TensorFlow Lite、Core MLの活用
- **WebAssembly**: 重い処理の高速化
- **GraphQL**: より効率的なデータ取得
