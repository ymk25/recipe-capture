# YouTube料理動画レシピ抽出アプリ 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名

**RecipeCapture** - YouTube料理動画からのレシピ自動抽出アプリ

### 1.2 目的

YouTubeの料理動画URLを入力するだけで、動画の音声、字幕、説明文を解析し、構造化されたレシピ情報を自動抽出するモバイルアプリの開発

### 1.3 対象プラットフォーム

- iOS
- Android
- React Native使用によるクロスプラットフォーム開発

## 2. ユースケース

### 2.1 主要ユーザー

- **一般ユーザー（料理初心者・中級者）**:
  YouTube料理動画を見ながら料理を作りたいが、レシピをメモするのが面倒
- **料理愛好家**: 気に入った料理動画のレシピを整理して保存したい
- **料理教室運営者**: YouTube動画を教材として活用し、生徒にレシピを配布したい

### 2.2 ユースケースシナリオ

#### 2.2.1 基本フロー

1. **動画発見**: ユーザーがYouTubeで気になる料理動画を発見
2. **URL共有**: 動画のURLをコピーしてアプリに貼り付け
3. **解析実行**: アプリが動画を自動解析（2-3分）
4. **結果確認**: 構造化されたレシピが表示される
5. **編集・保存**: 必要に応じてレシピを編集し、保存
6. **自動同期**: 保存されたレシピが全デバイスに即座に同期

#### 2.2.2 マルチデバイス利用フロー

1. **スマホで解析**: 通勤中にスマホでレシピ解析
2. **タブレットで確認**: 帰宅後タブレットで同じレシピを確認
3. **料理中の編集**: キッチンでスマホを使いながらレシピを微調整
4. **自動反映**: 編集内容が他のデバイスにリアルタイム反映

#### 2.2.3 異常フロー

1. **料理動画以外の場合**: 警告メッセージを表示し、解析を中止
2. **解析失敗の場合**: エラーメッセージと共に、手動入力オプションを提示
3. **制限回数超過**: プレミアム会員への誘導

## 3. 機能要件

### 3.1 コア機能

#### 2.1.1 動画解析機能

| 機能            | 詳細                                       | 優先度   |
| --------------- | ------------------------------------------ | -------- |
| YouTube URL入力 | YouTubeの動画URLを貼り付けるだけの簡単操作 | 必須     |
| 音声解析        | 動画の音声からレシピ情報を抽出             | 必須     |
| 字幕解析        | 字幕がある場合、字幕データを活用           | 必須     |
| 説明文解析      | 動画の説明文・コメントからレシピ情報を抽出 | 必須     |
| 映像解析        | 調理工程の画像抽出                         | 将来実装 |

#### 3.1.2 レシピ構造化機能

| 要素       | 詳細                         | 例                                            |
| ---------- | ---------------------------- | --------------------------------------------- |
| 料理名     | 動画のタイトルを使用         | "【簡単】鶏のから揚げの作り方"                |
| 材料リスト | 材料名と分量を構造化         | "鶏もも肉 500g、しょうゆ 大さじ2"             |
| 調理手順   | 調理手順を番号付きで整理     | "1. 鶏肉を一口大に切る 2. 調味料に30分漬ける" |
| 調理時間   | 合計調理時間、下ごしらえ時間 | "調理時間: 45分（下ごしらえ: 15分）"          |
| 人数       | 何人分のレシピか             | "2-3人分"                                     |

#### 3.1.3 コンテンツ検証・悪用対策機能

| 機能                       | 詳細                                       | 実装方法                                       |
| -------------------------- | ------------------------------------------ | ---------------------------------------------- |
| 料理動画判定               | アップロードされた動画が料理関連かチェック | Gemini APIでタイトル・説明文・サムネイルを解析 |
| 不適切コンテンツフィルター | 暴力的・成人向けコンテンツの検出           | YouTube Data APIのcontentRatingを確認          |
| スパム対策                 | 短時間での大量リクエストを制限             | レート制限（同一IPから1分間に3回まで）         |
| 著作権保護                 | 商用利用不可の動画をマーク                 | 動画説明欄とライセンス情報をチェック           |
| ユーザー報告機能           | 不適切なレシピの報告受付                   | アプリ内報告ボタン + 管理者レビュー            |

#### 3.1.6 マルチデバイス同期機能

| 機能             | 詳細                                                                   | 実装方法                          |
| ---------------- | ---------------------------------------------------------------------- | --------------------------------- |
| アカウント連携   | メールアドレス・パスワード、またはGoogleアカウントによる統一アカウント | Firebase Authentication           |
| リアルタイム同期 | レシピデータ・設定の即座な同期                                         | Firestore リアルタイムリスナー    |
| オフライン対応   | ネットワーク断絶時のローカル保存と復帰時同期                           | Firestore オフライン永続化        |
| デバイス管理     | ログイン中デバイスの表示・管理                                         | デバイス情報トラッキング          |
| 競合解決         | 複数デバイスでの同時編集時の競合処理                                   | 最終更新時刻ベース + ユーザー選択 |
| セッション管理   | 複数デバイスでの同時ログイン許可                                       | Firebase Auth マルチセッション    |

#### 3.1.7 レシピ管理機能

| 機能       | 詳細                           | 実装時期   |
| ---------- | ------------------------------ | ---------- |
| レシピ保存 | 抽出したレシピをローカルに保存 | MVP        |
| レシピ編集 | 抽出結果の手動編集             | MVP        |
| レシピ一覧 | 保存済みレシピの一覧表示       | MVP        |
| タグ付け   | レシピのカテゴリ管理           | フル機能版 |
| 検索機能   | 保存済みレシピの検索           | フル機能版 |
| お気に入り | レシピのお気に入り登録         | フル機能版 |

#### 3.1.8 レシピ出力機能（将来実装）

| 機能       | 詳細                                   | フォーマット                 |
| ---------- | -------------------------------------- | ---------------------------- |
| PDF出力    | レシピを印刷可能なPDF形式で出力        | 材料リスト・手順・画像含む   |
| CSV出力    | レシピデータをCSV形式で一括出力        | データ分析・他アプリ連携用   |
| 印刷最適化 | キッチンでの利用に最適化したレイアウト | A4サイズ・読みやすいフォント |
| バッチ出力 | 複数レシピの一括出力                   | PDF結合・ZIP圧縮             |

## 4. 技術要件

詳細な技術仕様については、別途「技術選定.md」および「技術設計書.md」を参照してください。

## 5. 非機能要件

### 5.1 パフォーマンス

- **レシピ解析処理時間**: 平均2-3分以内
- **アプリ起動時間**: 3秒以内
- **レシピ一覧表示**: 1秒以内

### 5.2 可用性

- **稼働率**: 99.5%以上
- **メンテナンス時間**: 月1回、深夜1時間以内

### 5.3 セキュリティ

- **認証**: Firebase Authentication使用
- **API通信**: HTTPS必須
- **データ暗号化**: 保存データの暗号化

### 5.4 拡張性

- **ユーザー数**: 初期10,000ユーザー対応
- **同時リクエスト**: 100リクエスト/分

## 6. 開発計画

### 6.1 Phase 1: MVP

- [x] 基本UI実装（React Native）
- [x] YouTube URL入力・検証
- [x] 音声・字幕・説明文解析
- [x] 基本的なレシピ構造化
- [x] ローカルストレージ（AsyncStorage）
- [x] Firebase認証・マルチデバイス対応
- [x] リアルタイムデータ同期

### 6.2 Phase 2: 機能拡張

- [x] レシピ編集機能
- [x] タグ・カテゴリ管理
- [x] 検索機能
- [x] 有料プラン実装
- [x] 広告システム統合
- [x] デバイス管理機能
- [x] 競合解決機能
- [x] パフォーマンス最適化

### 6.3 Phase 3: 高度な機能

- [x] 画像抽出機能
- [x] レシピ出力機能（PDF・CSV）
- [x] 高度なAI解析
- [x] ソーシャル機能
- [x] レシピ共有機能
